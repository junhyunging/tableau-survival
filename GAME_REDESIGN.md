# Tableau Quest - 태블로 마스터의 길

## 게임 컨셉

### 기본 정보
- **게임명**: Tableau Quest (태블로 퀘스트)
- **형태**: 챕터 클리어형 인터랙티브 학습 게임
- **목적**: 태블로 입문부터 실무 분석 기법까지 체계적으로 학습
- **대상**: 태블로를 처음 배우는 수강생 / 실무 활용을 원하는 분석가

### 스토리 설정
- **주인공**: 신입 데이터 분석가 (이름 직접 입력, 성별 선택)
- **회사**: 그로우랩 (GrowLab) - 데이터 기반 성장 전략 컨설팅 회사
- **멘토/상사**: 박서연 팀장 (실력 있고 꼼꼼한 데이터 분석 리드, 가끔 츤데레)
- **동기**: 플레이어 성별에 따라 자동 변경 (이성 동기)
  - 플레이어 여자 → **신준형** (남자 동기, 오토메풍 남주)
  - 플레이어 남자 → **정소희** (여자 동기, 에로게풍 여주)
- **스토리 톤**: 팀장 밑에서 실무 프로젝트를 수행하며 성장 + 동기와의 회사 생활 (썸 루트)
- **엔딩**: 20챕터 모두 클리어 → 정식 시니어 분석가 승급 + 호감도에 따른 엔딩 분기

### 구조: "챕터 클리어" 방식
- **20개 챕터**를 4개 파트로 나눠 순서대로 클리어
- 각 챕터 = 1개 핵심 주제에 집중
- XP(경험치) + 레벨 시스템으로 성장 체감
- 챕터별 별점(1~3★) 평가
- **칭호 수집** 시스템 (해금 조건 달성 시 칭호 획득 + 장착)

---

## 게임 메카닉

### XP (경험치) 시스템
| 행동 | XP |
|------|-----|
| 퀴즈 정답 | +8 XP |
| 퀴즈 오답 | +1 XP (시도 보상) |
| 워크스페이스 정답 | +15 XP |
| 계산식 정답 | +15 XP |
| 힌트 없이 정답 | 보너스 +3 XP |
| 보스 챌린지 클리어 | +25 XP |

### 레벨 시스템 (만렙 Lv.10)
| 레벨 | 필요 누적 XP | 기본 칭호 |
|------|-------------|----------|
| 1 | 0 | 수습 분석가 |
| 2 | 80 | 데이터 루키 |
| 3 | 200 | 차트 메이커 |
| 4 | 400 | 분석 전사 |
| 5 | 700 | 인사이트 헌터 |
| 6 | 1100 | 데이터 마법사 |
| 7 | 1600 | 시니어 분석가 |
| 8 | 2200 | 분석 챔피언 |
| 9 | 3000 | 데이터 레전드 |
| 10 | 4000 | 태블로 마스터 |

- 레벨업 시 기본 칭호가 자동으로 변경됨
- 별도로 해금한 **수집 칭호**를 장착하면 기본 칭호 대신 표시

### 챕터별 별점 (★)
- 모든 문제 정답 + 힌트 미사용 = ★★★
- 80% 이상 정답 = ★★
- 클리어만 하면 = ★

### 파트 잠금/해제
- Part 1 (Ch1~4): 기본 해제
- Part 2 (Ch5~9): Part 1 클리어 시 해제
- Part 3 (Ch10~16): Part 2 클리어 시 해제
- Part 4 (Ch17~20): Part 3 클리어 시 해제
- 같은 파트 내에서는 순서대로 진행
- 클리어한 챕터는 언제든 복습 가능

---

## 챕터 선택 UI 🎴

### 컨셉: 스와이프형 챕터 카드
월드맵 대신 **좌우 스와이프로 챕터를 넘기는 카드 UI**를 사용한다.
각 챕터는 **스토리 장면 썸네일 + 제목**으로 구성된 카드 형태.

```
┌──────────────────────────────────────────────────────────┐
│                    Part 1: 태블로 기초                      │
│                                                          │
│    ◀  ┌─────────────────────┐  ▶                        │
│       │  ░░░░░░░░░░░░░░░░░  │                           │
│       │  ░░ [장면 썸네일] ░░  │  ← 스토리 중 한 장면       │
│       │  ░░░░░░░░░░░░░░░░░  │                           │
│       │                     │                           │
│       │  Chapter 3          │                           │
│       │  마크 카드와 차트의 세계│                           │
│       │  ★★☆               │                           │
│       │                     │                           │
│       │   [ 도전하기 ]       │                           │
│       └─────────────────────┘                           │
│                                                          │
│       ○ ○ ● ○    ← Ch1  Ch2 [Ch3] Ch4 (도트 인디케이터) │
│                                                          │
│  Lv.4 분석 전사  │  XP ████████░░ 520/700  │  ♥ 3단계    │
└──────────────────────────────────────────────────────────┘
```

### 카드 3가지 상태

#### 1. 클리어한 챕터 ✅
```
┌─────────────────────┐
│                     │
│   [선명한 장면 사진]   │  ← 해당 챕터 스토리 중 인상적인 장면
│                     │
│  ✅ Chapter 1        │
│  태블로와의 첫 만남    │
│  ★★★               │
│                     │
│   [ 다시 플레이 ]     │  ← 복습 가능
└─────────────────────┘
```
- 썸네일: **선명한 원본 장면** (해당 챕터의 하이라이트 씬)
- 별점 표시
- "다시 플레이" 버튼

#### 2. 현재 도전 가능한 챕터 🔓
```
┌─────────────────────┐
│                     │
│   [선명한 장면 사진]   │  ← 살짝 미리보기 (기대감 유발)
│                     │
│  🔓 Chapter 3        │
│  마크 카드와 차트의 세계│
│  "같은 데이터도 보여주 │
│   는 방식에 따라..."  │  ← 챕터 한줄 설명
│                     │
│   [ 도전하기 ]        │  ← 활성 버튼 (강조 색상)
└─────────────────────┘
```
- 썸네일: **선명하게 보임** (어떤 내용인지 미리보기)
- 챕터 부제 표시
- "도전하기" 버튼 (강조 컬러, 살짝 펄스 애니메이션)

#### 3. 잠긴 챕터 🔒
```
┌─────────────────────┐
│ ░░░░░░░░░░░░░░░░░░░ │
│ ░░░░░░░░░░░░░░░░░░░ │  ← 모자이크(blur) 처리된 장면
│ ░░░░░░░░░░░░░░░░░░░ │
│                     │
│  🔒 Chapter 8        │
│  테이블 계산          │
│                     │
│  Part 2 클리어 시 해제│  ← 해제 조건 표시
│                     │
└─────────────────────┘
```
- 썸네일: **CSS `filter: blur(20px)` + 밝기 저하** (모자이크 느낌)
- 제목은 보이지만 내용은 가려짐 (궁금증 유발)
- 버튼 없음, 해제 조건만 표시
- 카드 전체에 **자물쇠 아이콘 오버레이**

### 각 챕터별 썸네일 장면

| 챕터 | 썸네일 장면 (스토리 중 한 컷) |
|------|---------------------------|
| Ch1 | 첫 출근, 박서연 팀장과 악수하는 장면 |
| Ch2 | 팀장이 화이트보드에 차원/측정값 설명하는 장면 |
| Ch3 | 데이터로 만든 차트를 보며 감탄하는 장면 |
| Ch4 | 엉망인 엑셀 파일을 보고 당황하는 장면 |
| Ch5 | 계산된 필드 에디터 앞에서 고민하는 장면 |
| Ch6 | 팀장과 배송 데이터 분석하는 장면 |
| Ch7 | 클라이언트 앞에서 매개변수 시연하는 장면 |
| Ch8 | 복잡한 테이블 계산에 머리 싸매는 장면 |
| Ch9 | LOD 수식이 떠오르며 "유레카!" 하는 장면 |
| Ch10 | KPI 대시보드를 경영진에게 보여주는 장면 |
| Ch11 | 퍼널 차트를 보며 이탈 포인트를 찾는 장면 |
| Ch12 | 파레토 차트로 핵심 제품을 발견하는 장면 |
| Ch13 | 고객 세분화 결과를 팀원들과 공유하는 장면 |
| Ch14 | 코호트 히트맵을 보며 팀장이 고개 끄덕이는 장면 |
| Ch15 | 시계열 예측 그래프 앞에서 프레젠테이션 장면 |
| Ch16 | 이상값을 발견하고 동기와 하이파이브하는 장면 |
| Ch17 | 와이어프레임을 스케치하는 장면 |
| Ch18 | 대시보드 액션이 작동하며 놀라는 장면 |
| Ch19 | 인사이트 발표하며 자신감 넘치는 장면 |
| Ch20 | 최종 프로젝트 완료 후 팀 전체가 박수치는 장면 |

### 스와이프 인터랙션
- **좌우 스와이프** 또는 **좌우 화살표 버튼**으로 이동
- 현재 카드는 크게, 양옆 카드는 작게 보이는 **캐러셀(Carousel)** 방식
- 파트 경계에서는 **파트 구분 배너** 삽입 ("Part 2: 계산의 기술 🔓")
- 스와이프 시 **살짝 스프링 애니메이션** (Framer Motion)
- 잠긴 카드는 스와이프는 되지만 탭 불가
- 하단에 **도트 인디케이터** (현재 위치 표시)

### 파트 구분
```
 [Part 1]  Ch1 Ch2 Ch3 Ch4  │ [Part 2]  Ch5 Ch6 Ch7 Ch8 Ch9  │ ...
                              ↑
                        파트 구분 카드
                    "Part 2: 계산의 기술"
                    "Part 1 클리어 시 해제"
                    [잠금/해제 상태 표시]
```
- 파트 사이에 **파트 타이틀 카드**가 끼어있음
- 해제된 파트: 밝은 배경 + 파트명
- 잠긴 파트: 어두운 배경 + 자물쇠 + 해제 조건

### 상단/하단 정보 바
```
상단: [뒤로가기] Tableau Quest          [칭호 수집] [설정]
하단: Lv.4 분석 전사 │ XP ████░░ 520/700 │ ♥ 3단계 │ ★ 24/60
```
- **레벨 + 칭호** / **XP 게이지** / **호감도 단계** / **총 별 수**

### 구현 기술
```
- Framer Motion: useMotionValue + useDragControls (스와이프)
- CSS filter: blur(20px) + brightness(0.4) (잠긴 카드 모자이크)
- CSS backdrop-filter 또는 canvas pixelation (더 강한 모자이크 필요 시)
- IntersectionObserver: 현재 보이는 카드 감지 (도트 인디케이터 연동)
- 이미지: 각 챕터 스토리 씬에서 자동 캡처 또는 별도 제작
```

---

## 캐릭터 시스템

### 등장인물

#### 박서연 팀장 (멘토/상사)
- **성격**: 실력 있고 꼼꼼함. 겉으론 차갑지만 속으론 후배를 챙기는 츤데레. 가끔 날카로운 유머
- **역할**: 미션 브리핑, 문제 출제, 리액션, 평가
- **일러스트 표정**: 기본 / 미소 / 감탄 / 찡그림 / 한숨 / 진지 / 놀람
- **대사 톤 예시**:
  - 정답: "됐어, 이 정도면 써먹을 수 있겠네." (쿨한 칭찬)
  - 연속 정답: "...혹시 경력 숨기고 온 거 아니지?" (놀람)
  - 오답: "다시 생각해봐. 힌트 줄까?" (담담)
  - 연속 오답: "...괜찮아, 나도 신입 때 이거 틀렸어." (위로)

#### 동기 캐릭터 (플레이어 성별에 따라 자동 변경)

> 코드에서는 `partner`로 통일. 성별에 따라 이름/대사/일러스트만 교체.

##### 🧑 신준형 (플레이어가 여자일 때 등장) — 오토메풍 남주
- **성격**: 겉으론 쿨하고 장난기 많은데, 속으론 은근히 챙기는 타입. 실력은 괜찮지만 가끔 허당. 칭찬에 약함. 플레이어한테 살짝 경쟁심도 있으면서 신경 쓰임
- **비주얼**: 슬랙스+셔츠 칼같이 입은 깔끔남. 살짝 긴 앞머리, 한쪽 귀에 이어폰
- **일러스트 표정**: 기본(여유로운 미소) / 씩 웃음 / 당황 / 찡그림 / 진지 / 시선 회피 / 귀 빨개짐
- **대사 톤 예시**:
  - 정답: "...제법인데? 나도 긴장되게 만드네" (씩 웃음)
  - 연속 정답: "야 좀 봐라 진짜... 나 설 자리가 없잖아" (당황 + 감탄)
  - 오답: "에이, 이건 좀 어렵긴 하지. 힌트 줄까? ...공짜는 아닌데?" (장난)
  - 호감도 높을 때: "...아 너 오늘 좀 일찍 온 거 아니야? 내가 먼저 왔는데" (시선 회피)
  - 호감도 낮을 때: "수고. 나 먼저 간다" (쿨, 거리감)

##### 👩 정소희 (플레이어가 남자일 때 등장) — 갈게/에로게풍 여주
- **성격**: 밝고 사근사근하고 리액션이 큼. 플레이어를 은근히 의지하고 살짝 덜렁거리지만 노력파. 칭찬하면 금방 얼굴 빨개짐. 가끔 엉뚱한 질문으로 분위기 환기
- **비주얼**: 블라우스+카디건 조합, 부드러운 웨이브 머리, 동글동글한 눈
- **일러스트 표정**: 기본(밝은 미소) / 감탄(별눈) / 부끄러움(볼 빨개짐) / 걱정 / 삐짐(볼 부풀림) / 설렘(손 모으기) / 응원(주먹 쥐기)
- **대사 톤 예시**:
  - 정답: "우와~! 또 맞았어? 나도 알려줘... 제발?" (감탄 + 별눈)
  - 연속 정답: "...솔직히 좀 멋있다. 아 아무것도 아니야!!" (부끄러움 + 손사래)
  - 오답: "괜찮아! 나도 방금 틀렸거든 ㅋㅋ 같이 다시 해보자~" (응원)
  - 호감도 높을 때: "오늘도 같이 점심 먹는 거지...? 아 그냥 물어본 거야!" (설렘 + 당황)
  - 호감도 낮을 때: "아 네, 수고하세요~" (기본, 거리감)

##### 대사 차이 비교 (같은 상황)
| 상황 | 신준형 🧑 | 정소희 👩 |
|------|----------|----------|
| 첫 만남 | "같은 날 입사라니, 인연이네. 잘 부탁해." (쿨) | "와 동기다! 잘 부탁해~ 우리 친하게 지내자!" (밝음) |
| 플레이어가 잘할 때 | "...야 너 좀 무섭다. 진짜 잘하네" (경쟁심+감탄) | "대박... 어떻게 그렇게 잘해? 부럽다~" (순수 감탄) |
| 플레이어가 못할 때 | "이런 건 나한테 물어보지 그랬어" (은근 도움) | "힘내! 내가 커피 사줄게, 기운 내~" (직접 챙김) |
| 회식 자리 선택 | "뭐야, 내 옆에 앉는 거야? ...맘대로 해" (츤데레) | "헤헤 옆에 앉아줘서 고마워~!" (솔직하게 기뻐함) |
| 우산 이벤트 | "...비 오는데 뭐 해. 타" (무뚝뚝하게 우산 내밀기) | "우산 없어?! 같이 쓰자! 가까이 와~" (자연스럽게 팔짱) |
| 고백 | "...자꾸 신경 쓰이는데 어쩌라고. 책임져" (시선 회피) | "있잖아... 사실 첫날부터 신경 쓰였어. 앞으로도 내 옆에 있어줄래?" (눈물글썽) |

### 캐릭터 등장 타이밍
| 타이밍 | 박서연 팀장 | 동기 (준형/소희) |
|--------|-----------|----------------|
| 챕터 시작 브리핑 | ✅ 메인 (미션 설명) | 가끔 등장 (준형: "이번 건 뭔데?" / 소희: "이번 건 뭐야~?") |
| 문제 정답/오답 리액션 | ✅ 매 문제 | 2~3문제마다 한 번 |
| 개념 설명 보조 | 핵심 개념 | 준형: "아 그거 이거지" / 소희: "아 그거 이런 뜻이야?" |
| 보스 챌린지 전 | "마지막 문제다, 집중해" | 준형: "마지막이라고? 해봐" / 소희: "파이팅! 넌 할 수 있어!" |
| 보스 클리어 후 | 평가 + 별점 | 호감도에 따른 리액션 |
| 사내 이벤트 | 가끔 등장 | ✅ 메인 |

---

## 호감도 시스템 ❤️

### 동기 호감도 (준형 또는 소희)
- **범위**: 0 ~ 100 (시작: 30)
- **표시**: 하트 게이지 (프로필 영역에 작은 하트 아이콘 + 단계 표시)
- **호감도는 숨겨도 되고, 대략적 단계만 표시해도 됨** (비주얼 노벨 느낌)

### 호감도 변동

#### 실력으로 올리기
| 행동 | 호감도 |
|------|--------|
| 문제 정답 (첫 시도) | +1 |
| 연속 3문제 정답 | +3 (보너스) |
| 보스 첫 시도 클리어 | +5 |
| 힌트 없이 챕터 클리어 | +3 |
| ★★★ 획득 | +5 |

#### 선택지로 올리기/내리기
| 선택 유형 | 호감도 |
|----------|--------|
| 다정한 답변 선택 | +2~5 |
| 무심한/차가운 답변 | -1~3 |
| 사내 이벤트에서 동기 옆 선택 | +3 |
| 사내 이벤트에서 다른 자리 선택 | -1 |
| 동기 힌트를 수락 | +1 (기뻐함) |
| 동기 힌트를 거절 | ±0 (약간 서운해함) |

#### 실력 부족으로 내리기
| 행동 | 호감도 |
|------|--------|
| 연속 3문제 오답 | -2 (동기가 걱정) |
| 같은 문제 3회 이상 오답 | -1 |

### 호감도 단계 & 반응 변화
| 단계 | 호감도 | 준형 🧑 | 소희 👩 | 호칭 |
|------|--------|---------|---------|------|
| 1단계: 동기 | 0~20 | 쿨하게 선 긋기, 업무적 | 예의 바른 거리감, 업무적 | "OO씨" |
| 2단계: 친한 동기 | 21~40 | 장난 걸기 시작, 가벼운 티키타카 | 편하게 말 걸음, 밝게 웃음 | "OO아/야" / "야" |
| 3단계: 신뢰 | 41~60 | 은근히 챙김 (커피, 야근 도움), 경쟁심 | 고민 상담, 따뜻한 응원, 개인 이야기 공유 | 준형: "야" / 소희: "있잖아~" |
| 4단계: 썸 | 61~80 | 말수 줄어듦, 귀 빨개짐, 시선 회피 | 부끄러워함, 볼 빨개짐, 손장난 | 준형: "...야" / 소희: "저기..." |
| 5단계: 고백 | 81~100 | 진지해짐, 둘만 있으려 함 | 대놓고 좋아함, 특별한 선물 | 준형: "할 말 있는데" / 소희: "나 사실..." |

### 호감도별 대사 변화 예시

**문제 정답 시:**
| 단계 | 신준형 🧑 | 정소희 👩 |
|------|----------|----------|
| 1단계 | "오, 맞았네" | "오 맞았네요, 대단하다~" |
| 2단계 | "제법인데? 나랑 붙어볼래?" | "오오 역시! 나도 알려줘~" |
| 3단계 | "...야 너 좀 무섭다 진짜" | "와 진짜 잘한다... 나도 너처럼 되고 싶어" |
| 4단계 | "또 맞았어? ...좀 그만 잘하면 안 되냐" (귀 빨개짐) | "또 맞았어...? 솔직히 그런 거 좀 멋있어" (시선 회피) |
| 5단계 | "...자꾸 보게 된다. 문제 푸는 모습" (진지) | "...볼 때마다 대단해. 나 옆에 이런 사람이 있다니" (부끄러움) |

**챕터 클리어 시:**
| 단계 | 신준형 🧑 | 정소희 👩 |
|------|----------|----------|
| 1단계 | "수고. 나도 가볼게" | "수고하셨어요~ 저도 열심히 해야겠다" |
| 2단계 | "고생했네. 커피 사줄까? ...내기에서 졌으니까" | "우리 둘 다 고생했어! 커피 한잔 할래?" |
| 3단계 | "오늘 집중하는 거 봤는데... 아 아니 그냥" | "너 아까 그거 풀 때 진짜 집중하는 모습이... 아 아무것도 아니야" |
| 4단계 | "...퇴근하고 시간 있어? 아니 별거 아닌데" (시선 회피) | "있잖아, 오늘 퇴근하고 시간 있어...?" (부끄러움) |
| 5단계 | "할 얘기가 있는데. 끝나고 잠깐..." (진지) | "오늘 끝나고 나서... 할 얘기가 있어" (설렘 + 긴장) |

---

## 사내 이벤트 시스템 🏢

### 이벤트 발생 시점
- **매 챕터 클리어 후** 1개의 사내 이벤트 발생 (20챕터 = 20개 이벤트)
- 이벤트는 챕터 클리어 → 사내 이벤트 → 챕터 선택 화면 복귀 순서

### 이벤트 종류

#### 🍽️ 점심/식사 이벤트 (Ch 1, 5, 9, 13, 17)
```
"점심시간이다! 오늘은 누구랑 먹을까?"

→ A: 동기랑 먹기 (준형: "뭐 먹을래, 내가 살게" / 소희: "같이 가자~!" → 호감도 +3)
→ B: 박서연 팀장과 먹기 (업무 팁 획득, 다음 챕터 힌트, 호감도 ±0)
→ C: 혼자 먹기 (조용히 복습, XP +5, 호감도 -1)
```

#### 🍺 회식/술자리 이벤트 (Ch 4, 8, 12, 16, 20)
파트 마지막 챕터 클리어 시 발생. **자리 선택** 시스템:
```
"팀 회식이다! 어디에 앉을까?"

[테이블 배치도 시각화]
┌─────────────────────────┐
│  팀장  │ 빈자리A │ 선배  │
├────────┼─────────┼───────┤
│ 빈자리B │         │ 동기  │
└─────────────────────────┘

→ A: 팀장 옆 (심도 있는 대화, XP +10, 호감도 -2. 준형: "...맘대로 해" / 소희: "아...")
→ B: 동기 옆 (호감도 +5. 준형: "뭐야, 옆에 앉는 거야? ...좋을 대로" / 소희: "헤헤 옆에 앉아줘서 고마워~")
→ C: 선배 옆 (실무 노하우 획득, 다음 파트 힌트, 호감도 ±0)
```

회식 중 추가 선택지:
```
준형: "이거 좀 봐줄 수 있어? ...아 나도 어지간하면 안 물어보는데" (당황)
소희: "나 이거 잘 모르겠어... 도와줄 수 있어?" (걱정)

→ A: "당연하지, 같이 보자" (호감도 +3)
→ B: "음, 나중에 알려줄게" (호감도 -1)
→ C: "직접 해봐, 그래야 실력이 늘지" (호감도 -2, 하지만 동기 실력 성장 이벤트 트리거)
```

#### ☕ 카페/휴게실 이벤트 (Ch 2, 6, 10, 14, 18)
```
"잠깐 휴게실에서 쉬는데, 동기가 다가온다"

준형: "야, 이거 좀 봐봐. 내가 만든 건데 뭔가 이상하거든" (쿨한 척)
소희: "이거 봐봐~ 내가 만든 차트인데 이상하지 않아?" (걱정)

→ A: 꼼꼼하게 봐주기 (호감도 +2, 준형: "...고마워" / 소희: "역시 넌 다르다~!")
→ B: 대충 "괜찮은데?" (호감도 ±0, 준형: "진짜? 음..." / 소희: "정말? 음...")
→ C: "바빠서 나중에 볼게" (호감도 -2, 준형: "아 그래, 됐어" / 소희: "아... 그래 미안")
```

#### 🎉 팀 이벤트 (Ch 3, 7, 11, 15, 19)
```
Ch3:  팀 워크숍 → 팀 빌딩 게임에서 짝 선택
Ch7:  야근 이벤트 → 야식 주문 (같이 먹기 / 각자 먹기)
Ch11: 팀 생일파티 → 케이크 자르기 + 선물 선택
Ch15: 프로젝트 성공 기념 → 단체 사진 (포즈 선택)
Ch19: 송년회 → 장기자랑 or 응원 선택
```

#### 🌟 특별 이벤트 (조건부 발생)
| 조건 | 이벤트 |
|------|--------|
| 호감도 40 도달 | 🌧️ 비 오는 날 우산 이벤트 (준형: 무뚝뚝하게 우산 내밀기 / 소희: "같이 쓰자~!") |
| 호감도 60 도달 | 🌙 야근 후 같이 걷기 이벤트 (깊은 대화 선택지, 분위기 전환) |
| 호감도 80 도달 | 💌 동기가 뭔가 전달 (준형: 커피+메모 "수고했다" / 소희: 손편지 전달) |
| 5챕터 연속 ★★★ | 🏆 팀장 특별 칭찬 이벤트 (동기가 보고 감탄) |
| 연속 5문제 오답 | 😢 동기 위로 이벤트 (준형: "나가서 바람 쐬자" / 소희: "맛있는 거 사줄게, 기운 내!") |

---

## 선택지 시스템 💬

### 선택지 유형

#### 1. 팀장 선택지 (업무 관련)
미션 브리핑이나 문제 사이에 등장. **XP와 학습에 영향**.
```
팀장: "이 데이터를 분석하는 방법이 두 가지야. 어떤 걸로 할래?"
→ A: "피벗 테이블로 먼저 요약하겠습니다" (정답 루트 → XP +5)
→ B: "원본 데이터를 바로 시각화하겠습니다" (오답 루트 → 팀장 피드백 + 학습)
```

#### 2. 동기 선택지 (관계 관련)
문제 사이사이나 이벤트에서 등장. **호감도에 영향**.
```
준형: "점심 뭐 먹을 건데? ...새로 생긴 파스타집 괜찮다던데"
소희: "오늘 점심에 새로 생긴 파스타집 가볼래~?"

→ A: "좋아! 같이 가자" (호감도 +3, 다정)
→ B: "오늘은 좀 바빠서..." (호감도 -1, 무심)
→ C: "거기 맛있대? 뭐가 맛있어?" (호감도 +1, 관심)
```

#### 3. 상황 선택지 (리스크/리워드)
예상치 못한 상황에서의 판단. **XP 증감 + 호감도 영향**.
```
[야근 중 갑자기 서버 에러 발생]
→ A: "팀장님한테 바로 보고합니다" (안전, XP ±0, 팀장 신뢰 +)
→ B: "내가 직접 해결해볼게" (리스크, 성공 시 XP +15 / 실패 시 XP -5)
→ C: "같이 봐줄 수 있어?" (호감도 +2, 동기와 협력 연출)
```

### XP 감소가 발생하는 상황
| 상황 | XP 변동 |
|------|---------|
| 리스크 선택지에서 실패 | -5~10 XP |
| 회식에서 부적절한 선택 (예: 취해서 실수) | -5 XP |
| 프로젝트 미팅에서 틀린 판단 선택 | -3 XP |
| 마감 못 맞춤 선택지 | -5 XP |

> ⚠️ XP 감소로 **레벨이 내려가지는 않음** (최소 XP = 현재 레벨 기준선).
> 하지만 **다음 레벨업이 늦어지는** 효과. 플레이어에게 긴장감을 줌.

---

## 챕터 플레이 흐름 (리뉴얼)

### Before (기존 - 교육 앱 느낌)
```
브리핑 → 개념카드 → 문제 → 문제 → 문제 → 문제 → 보스 → 클리어
```

### After (리뉴얼 - 비주얼 노벨 + 게임 느낌)
```
┌─ 1. 출근 / 일상 씬 ─────────────────────────────┐
│  오전 분위기 연출 (사무실 배경)                      │
│  동기 인사 (준형: "왔어?" / 소희: "오늘도 파이팅~!")   │
└──────────────────────────────────────────────────┘
                    ↓
┌─ 2. 미션 브리핑 (VN) ───────────────────────────┐
│  팀장 등장: "오늘 미션은..."                        │
│  클라이언트 상황 설명 (캐릭터 표정 변화)              │
│  [팀장 선택지] 접근 방법 선택                       │
└──────────────────────────────────────────────────┘
                    ↓
┌─ 3. 개념 학습 ──────────────────────────────────┐
│  인터랙티브 카드 2~4장                              │
│  동기: 보조 설명 (준형: "그거 이거지" / 소희: "이런 뜻이야?") │
└──────────────────────────────────────────────────┘
                    ↓
┌─ 4. 실전 연습 (문제 + 스토리 교차) ─────────────────┐
│                                                    │
│  팀장 대사 → [문제 1] → 팀장 리액션                  │
│       ↓                                            │
│  동기 대사 (응원/잡담) → [문제 2] → 팀장 리액션       │
│       ↓                                            │
│  [미니 이벤트: 클라이언트 전화/긴급 요청]              │
│       ↓                                            │
│  팀장 대사 → [문제 3] → 동기 리액션 (호감도별)        │
│       ↓                                            │
│  [동기 선택지: "같이 풀어볼래?" / "이거 좀 봐봐"]     │
│       ↓                                            │
│  [문제 4~5] → 팀장 + 동기 리액션                    │
│                                                    │
└──────────────────────────────────────────────────┘
                    ↓
┌─ 5. 보스 챌린지 ─────────────────────────────────┐
│  화면 연출 (어두워짐 + 긴장 BGM)                     │
│  팀장: "마지막 문제다. 집중해."                      │
│  동기: 준형 "해봐" / 소희 "파이팅!" (호감도별 변화)   │
│  [보스 문제] → 클리어/실패 연출                      │
└──────────────────────────────────────────────────┘
                    ↓
┌─ 6. 클리어 화면 ──────────────────────────────────┐
│  ★★★ 별점 + XP 획득 연출                           │
│  레벨업 시 연출 + 칭호 해금 알림                      │
│  팀장 평가 대사 / 동기 축하 대사 (호감도별)            │
└──────────────────────────────────────────────────┘
                    ↓
┌─ 7. 사내 이벤트 ──────────────────────────────────┐
│  점심 / 카페 / 회식 / 팀 이벤트 중 1개               │
│  선택지 2~3개 → 호감도 + XP 변동                    │
│  (특별 이벤트 조건 달성 시 추가 씬)                   │
└──────────────────────────────────────────────────┘
                    ↓
        [월드맵으로 복귀 → 다음 챕터]
```

### 리액션 시스템 상세

#### 팀장 리액션 (매 문제 후)
```javascript
// 리액션 풀 (같은 상황에도 랜덤으로 다른 대사)
const TEAM_LEAD_REACTIONS = {
  correct: [
    { text: "됐어.", expression: "smile" },
    { text: "그래, 이 정도는 해줘야지.", expression: "nod" },
    { text: "나쁘지 않네.", expression: "default" },
  ],
  correct_streak_3: [
    { text: "...혹시 경력직이야?", expression: "surprise" },
    { text: "이 속도면 야근은 없겠는데.", expression: "smile" },
  ],
  wrong: [
    { text: "다시 생각해봐.", expression: "serious" },
    { text: "아까 개념 카드 다시 볼래?", expression: "default" },
  ],
  wrong_streak_3: [
    { text: "...쉬었다 하자. 커피 한잔 마시고 와.", expression: "sigh" },
    { text: "괜찮아. 나도 처음엔 이거 틀렸어.", expression: "gentle" },
  ],
}
```

#### 동기 리액션 (2~3문제마다 + 호감도별 분기)
```javascript
// 성별에 따라 JUNHYUNG_REACTIONS 또는 SOHEE_REACTIONS 사용
const JUNHYUNG_REACTIONS = {  // 신준형 (오토메풍)
  correct: {
    low:  [{ text: "오, 맞았네", expression: "smirk" }],
    mid:  [{ text: "제법인데? 나랑 붙어볼래?", expression: "smirk" }],
    high: [{ text: "...좀 그만 잘하면 안 되냐", expression: "ears_red" }],
  },
  wrong: {
    low:  [{ text: "이건 좀 어렵긴 하지", expression: "default" }],
    mid:  [{ text: "나한테 물어보지 그랬어", expression: "smirk" }],
    high: [{ text: "...나가서 바람 쐬자. 같이", expression: "serious" }],
  },
}

const SOHEE_REACTIONS = {  // 정소희 (갈게풍)
  correct: {
    low:  [{ text: "오 맞았네요~!", expression: "smile" }],
    mid:  [{ text: "역시~! 나도 알려줘 ㅋㅋ", expression: "star_eyes" }],
    high: [{ text: "...또 맞았어? 볼 때마다 멋있다...", expression: "shy" }],
  },
  wrong: {
    low:  [{ text: "저도 틀렸어요, 어렵죠?", expression: "default" }],
    mid:  [{ text: "괜찮아! 같이 다시 해보자~", expression: "cheer" }],
    high: [{ text: "힘내... 맛있는 거 사줄까?", expression: "worried" }],
  },
}
```

---

## 엔딩 분기 🎬

### 호감도별 엔딩 (Ch20 클리어 후)
| 호감도 | 엔딩 | 신준형 🧑 | 정소희 👩 |
|--------|------|----------|----------|
| 0~20 | **동료 엔딩** | "같이 일할 수 있어서 나쁘지 않았어. 잘 해" | "같이 일할 수 있어서 좋았어요. 앞으로도 잘 부탁해요~" |
| 21~50 | **친구 엔딩** | "퇴근하고 한잔하러 가자. 앞으로도 자주 보는 거다" | "우리 진짜 잘 맞는 거 같아! 앞으로도 같이 다니자~" |
| 51~80 | **썸 엔딩** | "할 말 있는데... 아니 다음에. 어차피 자주 볼 거잖아" (귀 빨개짐) | "있잖아... 나중에 할 얘기가 있는데... 아 아직은 아니야!" (볼 빨개짐) |
| 81~100 | **고백 엔딩** 💕 | "...자꾸 신경 쓰이는데 어쩌라고. 책임져" (시선 회피→정면 응시) | "사실 첫날부터 신경 쓰였어. 앞으로도... 내 옆에 있어줄래?" (눈물글썽) |

### 공통 엔딩 (호감도와 무관)
- 팀장: "오늘부로 수습 딱지를 뗀다. 정식 시니어 분석가야. 고생했어."
- 승급 연출 + 최종 칭호 부여
- 전체 통계 화면 (정답률, 획득 XP, 해금 칭호, 플레이 시간)

---

## 칭호 수집 시스템

### 칭호 수집 페이지
- 전체 칭호 목록을 카드 형태로 표시
- 해금된 칭호: 밝게 표시 + "장착" 버튼
- 미해금 칭호: 어둡게 + 자물쇠 아이콘 + 해금 조건 표시
- 현재 장착 중인 칭호: 테두리 강조
- 해금률(%) 표시

### 칭호 목록

#### ★ 별 수집 칭호
| 칭호 | 해금 조건 | 설명 |
|------|----------|------|
| 반짝이 루키 | ★ 5개 수집 | 별빛이 보이기 시작했다 |
| 별 사냥꾼 | ★ 15개 수집 | 꽤 많은 별을 모았군요 |
| 스타 컬렉터 | ★ 30개 수집 | 밤하늘의 절반을 가졌다 |
| 별의 지배자 | ★ 45개 수집 | 거의 모든 별이 당신 것 |
| 은하수 정복자 | ★ 60개 (만점) 수집 | 모든 별을 손에 넣었다! |

#### 🏆 실력 칭호
| 칭호 | 해금 조건 | 설명 |
|------|----------|------|
| 완벽주의자 | 전체 정답률 90% 이상 유지 | 실수를 용납하지 않는다 |
| 천재 분석가 | 전체 정답률 80% 이상 + 전 챕터 클리어 | 최종 해금! 진정한 실력의 증거 |
| 힌트? 그게 뭐죠? | 힌트 0회 사용으로 10챕터 클리어 | 도움 없이도 해내는 강자 |
| 스피드 러너 | 보스 챌린지 10개를 첫 시도에 클리어 | 보스도 한 방에! |

#### 📚 파트 클리어 칭호
| 칭호 | 해금 조건 | 설명 |
|------|----------|------|
| 기초 졸업생 | Part 1 전 챕터 ★★ 이상 | 기본기가 탄탄하다 |
| 계산의 달인 | Part 2 전 챕터 ★★ 이상 | 계산식이 두렵지 않다 |
| 분석 전문가 | Part 3 전 챕터 ★★ 이상 | 비즈니스 분석의 고수 |
| 대시보드 아키텍트 | Part 4 전 챕터 ★★ 이상 | 대시보드 설계의 장인 |
| 그로우랩의 에이스 | 전 파트 ★★★ 올클리어 | 그로우랩 최고의 분석가! |

#### 💕 호감도 칭호
| 칭호 | 해금 조건 | 설명 |
|------|----------|------|
| 관심의 시작 | 호감도 40 달성 | 누군가 당신을 신경 쓰고 있다 |
| 두근두근 | 호감도 60 달성 | 눈이 마주칠 때마다 심장이 뛴다 |
| 사내 연애 주의보 | 호감도 80 달성 | 회사에서 이러면 안 되는데... |
| 해피엔딩 | 고백 엔딩 달성 | 태블로도 마스터하고 사랑도 찾았다 |
| 철벽남/녀 | 호감도 20 이하로 Ch20 클리어 | 일만 하러 왔습니다 |

#### 🎮 히든 칭호
| 칭호 | 해금 조건 | 설명 |
|------|----------|------|
| 불굴의 도전자 | 같은 문제 오답 후 재도전 성공 5회 | 포기란 없다 |
| 첫 걸음 | Chapter 1 클리어 | 모든 여정의 시작 |
| LOD 해독가 | Chapter 9 (LOD) ★★★ 클리어 | 가장 어려운 개념을 정복했다 |
| 야근의 왕 | 야근 이벤트 3회 이상 경험 | 칼퇴는 남의 나라 얘기 |
| 회식의 달인 | 모든 회식 이벤트 참석 | 사회생활의 기본 |

### 칭호 장착
- 프로필/상단바에 현재 칭호 표시
- 칭호 수집 페이지에서 해금된 칭호 중 하나를 "장착"
- 장착하지 않으면 현재 레벨의 기본 칭호가 표시됨

---

## 문제 유형 3가지

### 1. 퀴즈 (Quiz) - 개념 확인
단일선택 / 다중선택 / O×X / 매칭 등 객관식 문제. +8 XP

### 2. 태블로 워크스페이스 (Workspace) - 실전 시각화 실습 ⭐ 핵심
**실제 Tableau Desktop UI를 웹으로 재현**한 인터랙티브 실습 환경.
데이터 패인에서 필드를 열/행 선반으로 드래그하고, 마크 카드(색상/크기/레이블)를 설정하고,
표현방식(Show Me)으로 차트 타입을 바꾸며 실시간으로 차트가 렌더링됨.

기존 코드에 이미 구현된 요소:
- 데이터 패인 (Abc 차원 / # 측정값, 검색바, 데이터/분석 탭)
- 열/행 선반 (드래그앤드롭, 알약 필드 표시)
- 필터 선반
- 마크 카드 (차트종류 드롭다운, 색상/크기/레이블/세부정보/도구설명)
- 표현방식 패널 (Show Me - 막대/라인/파이 아이콘)
- 실시간 차트 미리보기 (Recharts)
- 시트 탭 (시트1, 시트2, +)
- 태블로 스타일 툴바

추가 개발할 요소:
- 마크 카드에 필드 드롭 지원 (색상/크기/레이블/세부정보에 자유 배치)
- 열/행 선반에 다중 필드 배치 (현재 1개 → 여러 개)
- 우클릭 집계 방식 변경 메뉴 (SUM/AVG/COUNT/MIN/MAX)
- 필터 다이얼로그 (차원=체크박스, 측정값=슬라이더)
- 산점도, 히트맵, 트리맵 등 차트 타입 추가
- 연속형(초록)/불연속형(파랑) 필드 전환

+15 XP (퀴즈보다 높은 보상)

### 3. 계산식 에디터 (Calc Field) - 수식 작성
CodeMirror 기반 에디터에서 Tableau 계산된 필드 수식을 직접 작성. 구문 하이라이팅 + 자동완성 + 실시간 유효성 검사. +15 XP

---

## 각 챕터 공통 구조
```
1. 출근 / 일상 씬 (비주얼 노벨)
   - 사무실 배경, 오전 분위기
   - 동기 인사 (호감도별 변화)
   - 가벼운 일상 대화 or 선택지

2. 미션 브리핑 (비주얼 노벨)
   - 박서연 팀장이 프로젝트 배경 설명
   - 클라이언트 상황 소개 → 이번 챕터 주제 자연스럽게 도입
   - [팀장 선택지] 접근 방법 선택 (XP 보너스 or 학습 피드백)

3. 개념 학습 (인터랙티브 카드)
   - 핵심 개념 2~4개를 카드 형태로 설명
   - 팀장: 핵심 설명 / 동기: 보조 설명 (쉬운 말로 풀이)

4. 실전 연습 (문제 + 스토리 교차) ⭐
   - 문제마다 캐릭터 대사 → 문제 → 리액션 구조
   - 2~3문제마다 미니 이벤트 (클라이언트 전화, 동기 대화 등)
   - 동기 선택지 ("같이 풀어볼래?" 등) 삽입
   - 워크스페이스 문제가 비중 높게 배치 (실습 중심)

5. 보스 챌린지 (종합 문제)
   - 긴장감 연출 (화면 어두워짐 + BGM 변화)
   - 팀장: "마지막이다" / 동기: 응원 (호감도별)
   - 챕터 내용을 종합하는 고난도 문제 1개

6. 클리어 화면
   - ★★★ 별점 + XP 획득 연출
   - 레벨업 시 연출 + 칭호 해금 알림
   - 팀장 평가 + 동기 축하 (호감도별 대사 변화)

7. 사내 이벤트
   - 점심 / 카페 / 회식 / 팀 이벤트 중 1개 발생
   - 선택지 → 호감도 + XP 변동
   - 월드맵으로 복귀
```

---

# Part 1: 태블로 기초 (Foundations)
> 태블로의 기본기를 다지는 단계

---

## Chapter 1: 태블로와의 첫 만남
> "모든 분석은 도구를 아는 것에서 시작된다"

### 학습 목표
- Tableau Desktop 인터페이스 구조 이해
- 데이터 연결 방식 (라이브 vs 추출) 구분
- 데이터 패인, 선반, 마크 카드, 표현방식 패널의 역할

### 스토리
> 그로우랩에 첫 출근한 신입. 박서연 팀장이 태블로를 소개한다.
> "우리 팀은 태블로로 모든 클라이언트 분석을 해. 먼저 기본부터 시작하자."

### 개념 카드
1. **태블로 인터페이스** - 데이터 패인(왼쪽에서 필드 선택), 선반(열/행에 필드 배치), 마크 카드(시각적 속성 조절), 표현방식(추천 차트 목록), 필터 선반, 페이지 선반
2. **데이터 연결** - 라이브(실시간 쿼리, 항상 최신 데이터) vs 추출(로컬에 저장, 빠른 속도, Tableau Public에서 필수)
3. **워크시트/대시보드/스토리** - 워크시트(개별 차트 하나), 대시보드(여러 시트 조합한 화면), 스토리(슬라이드처럼 넘기는 프레젠테이션)

### 문제 구성 (5문제 + 보스)
- quiz: 인터페이스 영역별 역할 (데이터 패인의 위치와 기능)
- quiz: 라이브 연결 vs 추출 연결의 차이
- workspace: 태블로 인터페이스 탐색 — 데이터 패인에서 [Category]를 열 선반에, [Sales]를 행 선반에 놓아 첫 번째 막대 차트 만들기
- quiz: 마크 카드에서 조절할 수 있는 속성
- workspace: 표현방식(Show Me) 활용 — 막대 차트를 라인 차트로 바꿔보고, 다시 파이 차트로 전환
- **보스**: "태블로 화면 구성 요소의 역할을 올바르게 매칭하라" (종합 매칭 퀴즈)

---

## Chapter 2: 차원과 측정값
> "데이터를 보는 두 가지 눈"

### 학습 목표
- 차원(Dimension)과 측정값(Measure) 개념 구분
- 연속형(초록)과 불연속형(파랑)의 차이
- 필터 카드에서의 연속형 vs 불연속형 동작 차이

### 스토리
> 팀장: "태블로의 모든 필드는 차원 아니면 측정값이야. 이걸 이해하면 절반은 된 거지."

### 개념 카드
1. **차원 vs 측정값** - 차원 = 범주형(Abc), 측정값 = 수치형(#). 예: "커피 종류(아메리카노, 라떼)" = 차원, "주문 금액(4500원)" = 측정값
2. **연속형 vs 불연속형** - 초록색 알약(연속) = 축을 만듦(숫자 범위), 파란색 알약(불연속) = 머리글을 만듦(개별 항목)
3. **필터의 차이** - 연속형 필터 = 슬라이더(범위 지정: 1000~5000), 불연속형 필터 = 체크박스(항목 선택: ✓서울 ✓부산)
4. **측정값의 집계** - 측정값은 뷰에 올리면 자동 집계됨 (SUM, AVG 등). 차원이 없으면 전체 합계 덩어리 1개!

### 문제 구성 (4문제 + 보스)
- quiz: 다음 중 측정값을 모두 고르시오 (Category / Sales / Profit / Ship Mode / Quantity)
- quiz: 연속형 필드를 필터에 넣으면 나타나는 UI 형태
- quiz: 차원 없이 측정값만 뷰에 올리면 어떻게 되는가
- workspace: 카테고리별 매출 막대 차트 만들기 — [Category]→열, SUM([Sales])→행으로 드래그
- **보스**: "연도별 카테고리별 매출 라인 차트를 만들어라" (workspace — [Order Date]→열, SUM([Sales])→행, [Category]→색상)

---

## Chapter 3: 마크 카드와 차트의 세계
> "같은 데이터도 보여주는 방식에 따라 인사이트가 달라진다"

### 학습 목표
- 마크 카드 5가지 속성 (색상, 크기, 레이블, 세부정보, 도구설명)
- VLOD(시각화 세부 수준) 개념
- 다양한 차트 유형 선택 기준 (막대, 라인, 산점도, 파이, 히스토그램)

### 스토리
> 팀장: "막대 차트 하나 만들었다고 끝이 아니야. 마크 카드를 활용하면 훨씬 풍부한 시각화가 가능해."

### 개념 카드
1. **마크 카드 속성** - 색상(범주 구분/값의 강도), 크기(값의 크기 비교), 레이블(수치 직접 표시), 세부정보(집계 수준 변경), 도구설명(마우스 오버 시 상세 정보)
2. **VLOD** - 세부정보에 차원을 추가하면 마크(점/막대)가 쪼개진다. 예: 열에 Sales, 행에 Profit만 넣으면 점 1개 → 세부정보에 고객명 추가하면 고객 수만큼 점이 생김
3. **차트 선택 가이드** - 비교=막대, 추이=라인, 상관관계=산점도, 비율=파이/도넛, 분포=히스토그램

### 문제 구성 (5문제 + 보스)
- quiz: 산점도에서 원의 크기로 수량을 표현하려면 어떤 마크 속성을 사용?
- quiz: SUM(Sales)와 SUM(Profit)만 놓으면 점은 몇 개? (VLOD)
- quiz: 행 수준(Row-level) 계산 vs 집계(Aggregate) 계산 차이
- workspace: 산점도 만들기 (Sales→열, Profit→행, 세부정보=Customer Name)
- workspace: 색상+레이블 적용한 막대차트 — [Category]→색상, SUM([Sales])→레이블
- **보스**: 고객별 산점도 만들기 (크기=Quantity, 색상=Profit Ratio)

---

## Chapter 4: 데이터 준비의 기술
> "좋은 분석은 깨끗한 데이터에서 시작된다"

### 학습 목표
- 데이터 인터프리터 활용
- 관계(Relationship) vs 조인(Join) vs 유니온(Union) 차이
- 적합한 데이터 결합 방식 선택

### 스토리
> 팀장: "클라이언트가 보낸 엑셀이 난장판이야. 병합된 셀에 시트도 여러 개. 데이터 정리부터 해야 해."

### 개념 카드
1. **데이터 인터프리터** - 병합된 셀, 부제목, 주석 등 지저분한 엑셀을 자동 정리. 원클릭 해결
2. **관계(Relationship)** - 태블로 기본 방식. 테이블 간 논리적 연결. 필요한 데이터만 가져와서 성능이 좋음
3. **조인(Join)** - INNER/LEFT/RIGHT/FULL. 행을 물리적으로 합침. 1:N이면 행이 뻥튀기될 수 있음
4. **유니온(Union)** - 같은 구조의 데이터를 세로로 쌓기. 예: 1월 매출.xlsx + 2월 매출.xlsx → 합치기

### 문제 구성 (5문제 + 보스)
- quiz: 데이터 인터프리터가 해결할 수 없는 것 (결측값 채우기)
- quiz: 태블로에서 기본 데이터 결합 방식 (관계)
- quiz: 월별 파일을 합칠 때 적합한 방식 (유니온)
- workspace: 유니온으로 합친 데이터를 지역별 매출 막대 차트로 시각화
- quiz: 주문 테이블과 고객 테이블을 연결할 때 (관계 or 조인)
- **보스**: 시나리오 기반 데이터 준비 전략 수립

---

# Part 2: 계산의 기술 (Calculations)
> 태블로의 핵심 무기, 계산된 필드를 마스터하는 단계

---

## Chapter 5: 계산된 필드 입문
> "데이터에 없는 인사이트는 직접 만든다"

### 학습 목표
- 계산된 필드 개념 (Create → Save → Use)
- 행 수준 계산 vs 집계 계산
- 논리 함수 (IF/THEN/ELSE, CASE/WHEN)
- 기본 집계 함수 (SUM, AVG, COUNT, COUNTD)

### 스토리
> 팀장: "데이터에 수익률 컬럼이 없어? 직접 만들면 되지. 그게 계산된 필드야."

### 개념 카드
1. **계산된 필드** - 새 컬럼을 직접 만들어 저장하고 분석에 활용. 분류/유형변환/집계/필터링 등 다양한 용도
2. **행 수준 vs 집계** - Row-level: 각 행에서 독립 계산 (예: [Price] * [Quantity]). Aggregate: 여러 행을 모아서 계산 (예: COUNTD([Customer]))
3. **IF vs CASE** - IF: 다양한 조건을 비교할 때 (부등호, AND/OR 등). CASE: 하나의 필드 값을 매칭할 때 (더 깔끔)
4. **집계 함수** - SUM(합계), AVG(평균), COUNT(레코드 수), COUNTD(고유 값 수), MIN, MAX

### 문제 구성 (6문제 + 보스)
- quiz: 계산된 필드의 용도
- calc: IF문 (Profit >= 0 → "흑자" / "적자")
- workspace: 만든 계산된 필드(흑자/적자)를 색상에 적용하여 카테고리별 수익 막대차트 시각화
- calc: CASE문 (Segment를 한글로 분류)
- quiz: COUNTD 결과값 추론 (중복 제거 후 고유 값 수)
- calc: Profit Ratio (SUM(Profit) / SUM(Sales))
- **보스**: 할인율 등급 분류 (IF ELSEIF 복합 조건 3단계 이상)

---

## Chapter 6: 날짜와 문자열 함수
> "날짜를 다루고, 텍스트를 조작하고, Null을 처리한다"

### 학습 목표
- 날짜 함수 (DATEDIFF, DATETRUNC, DATEADD, DATEPART)
- 문자열 함수 (CONTAINS, SPLIT, LEFT, RIGHT, LEN, REPLACE)
- 유형 변환 (STR, DATE, INT, FLOAT)
- Null 처리 (ZN, IFNULL, ISNULL)

### 스토리
> 팀장: "클라이언트가 배송 기간 분석을 원해. 주문일과 배송일 차이를 계산해야 해."

### 개념 카드
1. **날짜 함수** - DATEDIFF('day', [Order Date], [Ship Date]) = 배송일수, DATETRUNC('month', [Date]) = 월 첫째날로 자름, DATEPART('year', [Date]) = 연도만 추출
2. **문자열 함수** - CONTAINS([Product Name], "프린터") = 포함 여부, SPLIT([Address], " ", 1) = 공백 기준 분할, LEFT/RIGHT = 일부 추출
3. **유형 변환** - STR(숫자→문자), DATE(문자→날짜), INT(문자→정수)
4. **Null 처리** - ZN([값]) = Null이면 0으로, IFNULL([값], 대체값) = Null이면 대체값으로

### 문제 구성 (5문제 + 보스)
- calc: DATEDIFF로 배송 소요일 계산
- calc: 배송 속도 분류 (날짜 함수 + IF 조합)
- quiz: DATETRUNC('quarter', #2024-08-15#)의 결과
- calc: CONTAINS로 특정 제품 검색 필터 만들기
- quiz: ZN 함수를 써야 하는 상황
- **보스**: 배송 소요일 계산 + 속도 등급 분류 복합 계산식

---

## Chapter 7: 매개변수와 시나리오 분석
> "사용자가 직접 값을 바꿔가며 분석할 수 있다면?"

### 학습 목표
- 매개변수(Parameter) 개념과 생성
- 매개변수 + CASE 문 조합 (측정값 전환)
- What-If 시나리오 분석
- 매개변수 활용 사례 (기간 선택, 지표 전환, 임계값 조절)

### 스토리
> 팀장: "클라이언트가 매출/수익/수량을 버튼 하나로 전환해서 보고 싶대. 매개변수로 만들어보자."

### 개념 카드
1. **매개변수란** - 사용자가 값을 선택/입력하는 동적 도구. 계산식 안에서 "변수"처럼 동작함
2. **측정값 전환** - CASE [매개변수] WHEN "매출" THEN SUM([Sales]) WHEN "수익" THEN SUM([Profit]) END → 드롭다운 하나로 지표 전환
3. **What-If 분석** - "가격을 10% 올리면 매출이 어떻게 변할까?" 매개변수 슬라이더로 시뮬레이션
4. **활용 사례** - Daily/Weekly/Monthly 기간 전환, Top N 동적 필터, 목표선 조절

### 문제 구성 (5문제 + 보스)
- quiz: 매개변수의 역할
- calc: 측정값 전환 CASE 문 작성
- workspace: 매개변수로 전환되는 차트 — 드롭다운으로 매출/수익/수량 지표를 바꿔가며 막대차트 확인
- quiz: What-If 시나리오 분석 개념
- quiz: 매개변수 데이터 유형 선택
- **보스**: 매개변수로 측정값 + 기간 동시 전환하는 계산식

---

## Chapter 8: 테이블 계산
> "현재 화면의 데이터를 기반으로 한 차원 높은 분석"

### 학습 목표
- 테이블 계산 개념 (View 기반 계산, △ 표시)
- 테이블 계산 방향 (옆/아래/패널/특정 차원)
- 주소 지정 vs 파티션 지정 필드
- 퀵 테이블 계산 (구성비율, 순위, 비율차이, 누적합계, 이동평균)

### 스토리
> 팀장: "단순 합계 말고, 전월 대비 증감율이나 카테고리 구성비 같은 것도 만들어야 해."

### 개념 카드
1. **테이블 계산이란** - 현재 뷰에 표시된 데이터 기반으로 2차 계산. 필드명 앞에 △ 표시. RANK, RUNNING_SUM, WINDOW 등
2. **방향** - 주소 지정 필드(체크) = 계산이 진행되는 방향, 파티션 지정 필드(체크X) = 그룹을 나누는 기준
3. **퀵 테이블 계산** - 우클릭으로 빠르게 적용: 구성비율, 순위, 비율차이(증감율), 누적합계, 이동평균
4. **주의** - 방향 설정이 잘못되면 결과가 완전히 달라짐! 반드시 △ 클릭해서 확인

### 문제 구성 (5문제 + 보스)
- quiz: △ 표시의 의미
- quiz: 테이블 계산 방향별 결과 차이
- calc: RANK(SUM([Sales])) 순위 계산
- quiz: 전월 대비 증감율 = 비율 차이
- workspace: Top N 필터 구성 — 매출 상위 N개 카테고리만 표시하는 차트
- **보스**: 구성비율 계산식 SUM([Sales]) / TOTAL(SUM([Sales]))

---

## Chapter 9: LOD 표현식과 연산 순서
> "뷰에 보이지 않는 수준에서도 계산할 수 있는 강력한 도구"

### 학습 목표
- LOD(Level of Detail) 개념
- FIXED, INCLUDE, EXCLUDE 차이
- LOD 문법: { FIXED [차원] : 집계식 }
- Order of Operations (연산 순서)
- 컨텍스트 필터 활용

### 스토리
> 팀장: "고객별 첫 구매일을 구해야 하는데, 일반 계산으로는 안 돼. LOD를 쓸 때가 됐어."

### 개념 카드
1. **LOD란** - View의 세부 수준과 무관하게 원하는 수준에서 계산. 예: { FIXED [Customer] : MIN([Order Date]) } = 화면에 어떤 차원이 있든 고객별 최초 주문일
2. **FIXED/INCLUDE/EXCLUDE** - FIXED: View와 무관하게 지정 차원으로 / INCLUDE: View에 차원 추가 / EXCLUDE: View에서 차원 제외
3. **테이블 범위 LOD** - { MIN([Order Date]) } = 차원 없이 전체 테이블에서 계산
4. **Order of Operations** - 추출 → 데이터원본 → 컨텍스트 → FIXED → 차원 → INCLUDE/EXCLUDE → 측정값 → 테이블계산

### 문제 구성 (5문제 + 보스)
- quiz: LOD가 필요한 상황
- calc: FIXED로 고객별 최초 주문일
- calc: DATEDIFF + LOD로 첫 구매 후 경과일 계산
- quiz: Order of Operations - 컨텍스트 필터와 FIXED의 관계
- calc: 테이블 범위 LOD 활용
- **보스**: 코호트 분석용 계산식 (최초 구매 주차 + 경과 주수)

---

# Part 3: 비즈니스 분석 기법 (Business Analytics)
> 실무에서 실제로 쓰이는 분석 프레임워크를 태블로로 구현하는 단계

---

## Chapter 10: KPI 대시보드와 전년 동기 비교
> "핵심 지표를 한눈에 보여주고, 지난해와 비교한다"

### 학습 목표
- KPI(핵심 성과 지표) 카드 만들기
- 전년 동기 대비(YoY) 증감율 계산
- 전월 대비(MoM) 분석
- KPI 트렌드 라인 차트
- 누적(YTD) 분석

### 스토리
> 팀장: "경영진은 KPI 숫자만 빠르게 보고 싶어해. 매출, 수익, 주문수를 전년 대비 증감율과 함께 카드로 만들자."

### 개념 카드
1. **KPI 카드** - 큰 숫자 + 증감율 화살표 + 색상(녹=상승/적=하락). 가장 중요한 정보를 한눈에
2. **YoY 전년 비교** - LOOKUP(SUM([Sales]), -1)로 전년 값 → 비율 차이로 증감율. 계절성 영향을 제거한 비교
3. **YTD 누적** - RUNNING_SUM으로 연초~현재까지 누적 합계. 목표 대비 진행률 확인에 유용
4. **KPI 트렌드** - 라인 차트로 월별 추이 + 참조선(목표값) + 밴드(최소/최대 범위)

### 문제 구성 (5문제 + 보스)
- quiz: KPI 카드에 반드시 포함할 요소
- calc: 전월 대비 매출 증감율 (테이블 계산)
- quiz: YoY vs MoM의 차이와 언제 쓰는지
- calc: YTD 누적 매출 계산
- workspace: KPI 트렌드 라인 차트 구성 — 월별 매출 라인 + 참조선(목표값)
- **보스**: 매개변수로 기준 기간을 전환할 수 있는 KPI 카드 설계

---

## Chapter 11: 퍼널 분석과 AARRR 프레임워크
> "사용자가 어디서 이탈하는지 찾아내라"

### 학습 목표
- 퍼널(Funnel) 차트 개념과 구현
- 단계별 전환율(Conversion Rate) 계산
- AARRR 프레임워크 (Acquisition → Activation → Retention → Revenue → Referral)
- 이탈률(Drop-off) 분석

### 스토리
> 팀장: "이커머스 클라이언트가 매출이 왜 안 나오는지 모르겠대. 퍼널을 분석해서 어디서 사람들이 빠지는지 찾자."

### 개념 카드
1. **퍼널 분석** - 사용자 행동 단계별 전환율 시각화. 방문 → 회원가입 → 장바구니 → 결제 → 재구매. 깔때기처럼 줄어드는 구조
2. **전환율 계산** - 각 단계 인원 / 이전 단계 인원 × 100. 테이블 계산 활용
3. **AARRR** - Acquisition(획득), Activation(활성화), Retention(유지), Revenue(수익), Referral(추천). 스타트업 성장의 5단계 프레임워크
4. **이탈 포인트** - 전환율이 급격히 떨어지는 단계 = 개선 우선순위. 이탈률 = 100% - 전환율

### 문제 구성 (5문제 + 보스)
- quiz: 퍼널 분석의 목적
- quiz: AARRR 5단계 순서
- calc: 단계별 전환율 계산
- quiz: 이탈률이 가장 높은 단계 찾기 (데이터 시나리오)
- workspace: 퍼널 차트 만들기 — 단계별 사용자 수를 막대로 시각화
- **보스**: AARRR 퍼널에서 병목 구간 식별 + 개선안 제시

---

## Chapter 12: 파레토 분석과 ABC 분류
> "상위 20%가 전체의 80%를 만든다"

### 학습 목표
- 파레토 법칙 (80/20 Rule)
- 누적 비율 계산 (RUNNING_SUM + TOTAL)
- ABC 분류 (A=상위 70%, B=다음 20%, C=하위 10%)
- 이중 축 차트 (막대 + 누적 라인)

### 스토리
> 팀장: "어떤 제품이 매출의 대부분을 차지하는지 파악해야 해. 파레토 분석으로 핵심 제품을 찾자."

### 개념 카드
1. **파레토 법칙** - 상위 20% 제품이 80% 매출을 만든다. 집중해야 할 핵심을 찾는 분석 기법
2. **누적 비율** - RUNNING_SUM(SUM([Sales])) / TOTAL(SUM([Sales])). 매출 내림차순 정렬 후 누적
3. **ABC 분류** - A등급(누적 70%까지): 핵심 관리, B등급(70~90%): 일반 관리, C등급(90~100%): 관리 최소화
4. **이중 축** - 막대(개별 매출) + 라인(누적 비율)을 한 차트에 표시. 80% 참조선 추가

### 문제 구성 (5문제 + 보스)
- quiz: 파레토 법칙이 의미하는 것
- calc: 누적 비율 계산식
- quiz: ABC 분류 기준
- workspace: 파레토 차트 (이중 축) 만들기 — 막대(매출) + 라인(누적비율)
- calc: ABC 등급 분류 IF 문 작성
- **보스**: 파레토 고객 분석 - 상위 20% 고객이 전체 매출의 몇 %를 차지하는지

---

## Chapter 13: 고객 세분화와 RFM 분석
> "모든 고객이 같은 가치를 가지는 건 아니다"

### 학습 목표
- 고객 세분화(Segmentation) 개념
- RFM 분석 (Recency, Frequency, Monetary)
- LOD FIXED를 활용한 고객별 지표 계산
- RFM 점수 부여 및 세그먼트 분류

### 스토리
> 팀장: "이 클라이언트는 마케팅 예산이 한정적이야. 가장 가치 있는 고객을 찾아서 집중 마케팅해야 해."

### 개념 카드
1. **고객 세분화** - 행동/가치 기반으로 고객을 그룹으로 나누기. 각 그룹에 맞춤 전략 수립의 기초
2. **RFM 모델** - Recency(마지막 구매로부터 며칠 지났나), Frequency(총 몇 번 구매했나), Monetary(총 얼마를 썼나)
3. **LOD로 RFM 계산** - { FIXED [Customer] : DATEDIFF('day', MAX([Order Date]), TODAY()) } = Recency. 화면 구성과 무관하게 고객 단위로 계산
4. **세그먼트 분류** - RFM 점수 조합으로 VIP / 충성고객 / 이탈위험 / 신규 / 휴면 등 분류

### 문제 구성 (5문제 + 보스)
- quiz: RFM 각 지표가 측정하는 것
- calc: Recency 계산 (LOD FIXED + DATEDIFF)
- calc: Frequency 계산 (LOD FIXED + COUNTD)
- calc: Monetary 계산 (LOD FIXED + SUM)
- quiz: RFM 점수 해석 (R낮음/F높음/M높음 = VIP)
- **보스**: RFM 점수 부여 + 고객 등급 분류 전체 계산식

---

## Chapter 14: 코호트 분석과 리텐션
> "고객이 시간이 지나도 계속 돌아오는가?"

### 학습 목표
- 코호트(Cohort) 분석 개념
- 리텐션(유지율) 히트맵 만들기
- LOD FIXED로 코호트 배정
- DATEDIFF로 경과 기간 계산
- 고객 생애 가치(CLV) 기초

### 스토리
> 팀장: "1월에 가입한 고객이 3개월 후에도 구매하는지 알아야 해. 코호트 분석으로 리텐션을 측정하자."

### 개념 카드
1. **코호트 분석** - 같은 시기에 유입된 고객 그룹(코호트)의 시간에 따른 행동 변화 추적
2. **리텐션율** - 코호트 내 N주/N월 후에도 활동한 고객 비율. 높을수록 서비스 충성도 높음
3. **코호트 계산** - { FIXED [Customer] : MIN([Order Date]) } = 최초 구매일로 코호트 배정. DATEDIFF('week', [코호트], [Order Date]) = 경과 주수
4. **리텐션 히트맵** - 행=코호트(가입월), 열=경과 기간, 색상=리텐션율. 진할수록 유지율 높음

### 문제 구성 (5문제 + 보스)
- quiz: 코호트 분석의 목적
- calc: 고객별 최초 구매일 (LOD FIXED)
- calc: 최초 구매로부터 경과 주수
- quiz: 리텐션 히트맵 해석 (어느 코호트의 유지율이 가장 높은지)
- quiz: CLV(고객 생애 가치) 개념
- **보스**: 코호트 리텐션 분석 전체 계산식 (최초구매일 + 경과주수 + 리텐션율)

---

## Chapter 15: 시계열 분석과 예측
> "과거의 패턴에서 미래를 예측한다"

### 학습 목표
- 시계열(Time Series) 분석 기초
- 이동 평균(Moving Average) 계산
- 계절성(Seasonality) 패턴 탐지
- 태블로 내장 예측(Forecast) 기능
- 추세선(Trend Line) 활용

### 스토리
> 팀장: "내년 예산 계획을 세워야 해. 매출 추이를 분석하고 다음 분기 예측을 해보자."

### 개념 카드
1. **이동 평균** - WINDOW_AVG(SUM([Sales]), -6, 0) = 최근 7개 구간 평균. 단기 변동을 평활화하여 전체 추세를 파악
2. **계절성** - 요일/월/분기별 반복 패턴. DATEPART로 분해하여 확인. 히트맵(요일×시간)으로 시각화
3. **태블로 예측** - 내장 지수 평활(Exponential Smoothing) 기능. 우클릭 → 예측 → 표시. 신뢰 구간 포함
4. **추세선** - 선형/다항/지수/로그 중 선택. R² 값이 1에 가까울수록 설명력 높음

### 문제 구성 (5문제 + 보스)
- quiz: 이동 평균을 사용하는 이유
- calc: 7구간 이동 평균 계산식
- quiz: 계절성 분석에 적합한 차트 유형
- quiz: R² 값 해석 (0.85면 어떤 의미?)
- quiz: 상관관계 ≠ 인과관계 (Simpson's Paradox)
- **보스**: 이동 평균 + 추세선으로 매출 트렌드 분석 구성

---

## Chapter 16: 분포와 이상값 분석
> "평균만 보면 진실을 놓친다"

### 학습 목표
- 분포(Distribution) 분석 (히스토그램, 박스플롯)
- 평균의 함정과 데이터 분포 확인의 중요성
- 이상값(Outlier) 탐지 (IQR, Z-score)
- 통계적 시각화 기법

### 스토리
> 팀장: "고객 평균 주문금액이 5만원이래. 근데 중앙값은 2만원이야. 이게 무슨 뜻인지 알겠어?"

### 개념 카드
1. **평균의 함정** - 평균만으로 판단하면 안 됨! 극단값(이상값)이 평균을 왜곡할 수 있음. 반드시 분포 형태를 확인
2. **히스토그램/박스플롯** - 히스토그램: 값의 분포 빈도. 박스플롯: 사분위수 + 중앙값 + 수염 + 이상값 한눈에
3. **이상값 탐지** - IQR 방식: Q1 - 1.5×IQR 미만 or Q3 + 1.5×IQR 초과. Z-score: |Z| > 3이면 이상값 의심
4. **이상값 처리** - 이상값이 분석에 미치는 영향 확인 → 분석 목적에 따라 포함/제외 결정

### 문제 구성 (5문제 + 보스)
- quiz: 평균과 중앙값이 크게 다를 때 의미
- quiz: 박스플롯 구성 요소
- calc: 이상값 판별 계산식 (IQR 기반)
- quiz: 이상값 처리 판단 (시나리오)
- quiz: 상관계수 해석 (-1 ~ +1 범위)
- **보스**: 고객 주문금액 분포 분석 + 이상값 탐지 + 이상값이 수익에 미친 영향

---

# Part 4: 실무 대시보드 (Dashboard Mastery)
> 모든 것을 종합하여 비즈니스 가치를 전달하는 단계

---

## Chapter 17: 대시보드 설계 원칙
> "목적 없는 대시보드는 예쁜 쓰레기다"

### 학습 목표
- 대시보드 목적 프레임워크 (Who / Why / What / How / When)
- 경영진용(Top-down) vs 실무진용(Bottom-up) 대시보드
- Actionable 대시보드 설계 (Metric Hierarchy)
- 대시보드 레이아웃 원칙

### 스토리
> 팀장: "차트를 잘 만드는 것과 좋은 대시보드를 만드는 건 완전 다른 일이야. 설계부터 제대로 하자."

### 개념 카드
1. **목적 프레임워크** - Who(누가 보는가?), Why(왜 봐야 하는가?), What(무슨 지표를 봐야 하는가?), How(어떻게 비교할 것인가?), When(언제 업데이트되는가?)
2. **Metric Hierarchy** - Outcome(매출 목표 달성률) → Driver(구매 전환율, 객단가) → Input(CTR, 방문자 수). Input에 가까울수록 즉시 행동 가능
3. **Actionable 지표** - "이 숫자를 보고 뭘 해야 하지?"에 답이 없으면 대시보드에 넣지 마라. 상대적 지표(전주 대비 증감율), 비율 지표(전환율)가 좋은 지표
4. **레이아웃 원칙** - KPI는 최상단, 좌→우 / 상→하 읽기 흐름, 색상 2개 이내, 중요한 시트를 왼쪽/상단에 배치

### 문제 구성 (5문제 + 보스)
- quiz: Who - 경영진용 vs 실무진용 대시보드 차이
- quiz: 가장 Actionable한 지표 고르기
- quiz: 대시보드 구조 배치 순서 (KPI → Overview → Drill-down → Action Items)
- quiz: 목적에 맞는 차트 유형 선택 (추이=라인, 비교=막대, 비율=도넛)
- quiz: UX 원칙 (색상 수 제한, 폰트 크기 계층)
- **보스**: 주어진 비즈니스 상황에서 대시보드 목적 프레임워크 5가지 작성

---

## Chapter 18: 대시보드 액션과 인터랙션
> "클릭 한 번으로 인사이트를 탐색한다"

### 학습 목표
- 필터 액션 (Filter Action) 설정과 활용
- 하이라이트 액션 (Highlight Action)
- 매개변수 액션 (Parameter Action)
- 필터 박스와 시트를 필터로 사용
- 대시보드 인터랙션 설계

### 스토리
> 팀장: "지도에서 지역을 클릭하면 옆 차트가 자동으로 필터링되게 만들어. 그게 대시보드 액션이야."

### 개념 카드
1. **필터 액션** - 원본 시트 클릭 → 타겟 시트 필터링. 원본/타겟 시트, 실행 조건(클릭/마우스오버/메뉴), 필터 필드 설정
2. **하이라이트 액션** - 관련 데이터만 강조하고 나머지는 흐리게. 마우스 오버로 빠르게 탐색 가능
3. **매개변수 액션** - 시트 클릭 → 매개변수 값 자동 변경. 버튼식 UI 구현 (카테고리 전환 등)
4. **필터 박스** - 워크시트 필터 선반의 필터를 대시보드에 표시 → 다른 시트에도 적용

### 문제 구성 (5문제 + 보스)
- quiz: 필터 액션 구성 요소 (원본/타겟/실행조건)
- quiz: 하이라이트 vs 필터 액션의 차이
- quiz: 매개변수 액션의 활용 사례
- quiz: 필터를 다른 시트에도 적용하는 방법
- quiz: 대시보드 액션 실행 조건 (마우스오버/클릭/메뉴) 언제 쓰는지
- **보스**: 지도 클릭 → 바 차트 필터링 + 하이라이트 액션 설계

---

## Chapter 19: 인사이트 도출과 데이터 스토리텔링
> "데이터에서 인사이트를 찾고, 설득력 있게 전달한다"

### 학습 목표
- 인사이트 도출 프로세스 (지표 평가 → 원인 나열 → Drill-down)
- 비교를 통한 인사이트 (비율화, 전체 대비, 카테고리 비교)
- Drill-down 분석 기법 (변화점, 세그먼트, 이상치, 경향성)
- 데이터 스토리텔링 구조

### 스토리
> 팀장: "데이터를 보는 것과 인사이트를 발견하는 것은 다른 능력이야. 분석 결과를 설득력 있게 전달하는 것도 마찬가지."

### 개념 카드
1. **인사이트 도출 Flow** - 지표 변화 발견 → 비교 평가 → 원인 후보 나열 → Drill-down 시각화 → 스토리텔링으로 전달
2. **비교의 기술** - "비교가 없으면 인사이트도 없다." 비율로 바꿔보기, 전체 평균과 비교, 유사 카테고리끼리 비교
3. **Drill-down 기법** - 변화점 찾기(특정 시점 전후 차이), 세그먼트 쪼개기(고객/제품/지역), 이상치 확인, 상관관계 분석
4. **스토리텔링 구조** - 상황(Context) → 발견(Finding) → 원인(Why) → 제안(So What). 데이터 바깥의 맥락도 중요

### 문제 구성 (5문제 + 보스)
- quiz: 인사이트 도출의 첫 번째 단계
- quiz: "이 제품 매출이 좋은가 나쁜가?" → 비교 기준 없이 판단 불가
- quiz: Drill-down에서 변화점 분석 방법
- quiz: 상관관계 ≠ 인과관계
- quiz: 매출 상승 원인이 하나가 아닐 수 있는 이유
- **보스**: 매출 30% 하락 시나리오 → 원인 후보 나열 + Drill-down 전략 수립

---

## Chapter 20: 최종 프로젝트 - 종합 대시보드
> "지금까지 배운 모든 것을 증명하라"

### 학습 목표
- 요구사항 수집 → 와이어프레임 → 시트 제작 → UX 디자인 전체 프로세스
- 종합 분석 역량 발휘
- 그로우랩 정식 팀원 승급

### 스토리
> 팀장: "이제 마지막이야. 클라이언트에게 보여줄 대시보드를 직접 설계해봐.
> 합격하면 수습 딱지를 떼고 정식 팀원이 되는 거야. 화이팅!"

### 개념 카드
1. **요구사항 수집** - 이해관계자 유형 파악(임원/분석가/실무자), 문제 정의, 우선순위 정립
2. **와이어프레임** - 중요 정보 좌측 상단, 좌→우/상→하 흐름, KPI → Overview → Drill-down → Action Items 배치
3. **시트 제작 팁** - 꼭 필요한 시트만, 유저가 이해할 수 있는 차트, 제목만으로 내용이 전달되도록
4. **성능 최적화** - COUNTD 남용 금지, 복잡한 논리 → CASE 우선, 추출 상태에서 작업, 마크 수 주의

### 문제 구성 (6문제 + 보스)
- quiz: 대시보드 설계 첫 단계 (요구사항 수집)
- quiz: 와이어프레임 배치 원칙
- quiz: 유저가 필요한 것을 모를 때의 접근법
- quiz: 성능 최적화 팁 (COUNTD, CASE vs IF)
- quiz: 폰트 크기 계층 (타이틀 22-28, 헤더 9-10)
- quiz: 적합한 필터 방식 선택 (시나리오)
- **보스 (최종)**: 3문항 연속 종합 문제
  1. "쇼핑몰 매출 전분기 대비 30% 하락. 확인할 지표 3가지?" → 객단가, 구매전환율, 신규/기존 고객 비율
  2. "Furniture 내 매출 상위 3개를 보려면?" → 컨텍스트 필터 + 상위 필터
  3. "코호트별 리텐션율을 계산하려면?" → FIXED 최초 구매일 + DATEDIFF 경과 주수

---

# 전체 커리큘럼 요약

## 파트별 구성

| 파트 | 챕터 | 주제 | 핵심 기술 |
|------|------|------|----------|
| **Part 1** | Ch 1~4 | **태블로 기초** | 인터페이스, 차원/측정값, 마크카드, 데이터 준비 |
| **Part 2** | Ch 5~9 | **계산의 기술** | 계산된 필드, 함수, 매개변수, 테이블 계산, LOD |
| **Part 3** | Ch 10~16 | **비즈니스 분석 기법** | KPI, 퍼널/AARRR, 파레토/ABC, RFM, 코호트, 시계열, 이상값 |
| **Part 4** | Ch 17~20 | **실무 대시보드** | 설계원칙, 액션, 인사이트 도출, 종합 프로젝트 |

## 분석 기법 커버리지

| 분석 기법 | 챕터 | 난이도 |
|----------|------|--------|
| 기본 시각화 (막대/라인/산점도/파이) | Ch 3 | 입문 |
| 데이터 결합 (관계/조인/유니온) | Ch 4 | 입문 |
| 계산된 필드 (IF/CASE/집계) | Ch 5 | 초급 |
| 날짜/문자열 함수 | Ch 6 | 초급 |
| 매개변수 / What-If 시나리오 분석 | Ch 7 | 중급 |
| 테이블 계산 (순위/구성비/증감율) | Ch 8 | 중급 |
| LOD 표현식 (FIXED/INCLUDE/EXCLUDE) | Ch 9 | 중급 |
| KPI 카드 / YoY / MoM / YTD 분석 | Ch 10 | 중급 |
| 퍼널 분석 / AARRR 프레임워크 | Ch 11 | 중급 |
| 파레토 분석 / ABC 분류 | Ch 12 | 중급 |
| 고객 세분화 / RFM 분석 | Ch 13 | 고급 |
| 코호트 분석 / 리텐션 / CLV | Ch 14 | 고급 |
| 시계열 분석 / 이동 평균 / 예측 | Ch 15 | 고급 |
| 분포 분석 / 이상값 탐지 | Ch 16 | 고급 |
| 대시보드 설계 (Who/Why/What/How/When) | Ch 17 | 고급 |
| 대시보드 액션 (필터/하이라이트/매개변수) | Ch 18 | 고급 |
| 인사이트 도출 / 데이터 스토리텔링 | Ch 19 | 고급 |
| 종합 프로젝트 (Metric Hierarchy + Drill-down) | Ch 20 | 최고급 |

## 문제 통계
| 유형 | 개수 |
|------|------|
| 퀴즈 (Quiz) | ~60문제 |
| 태블로 워크스페이스 (Workspace) | ~20문제 |
| 계산식 에디터 (Calc Field) | ~20문제 |
| 보스 챌린지 | 20문제 |
| **총합** | **~120문제** |

---

## 기술 구현 계획

### 기존 코드 재활용
| 기존 컴포넌트 | 변경 내용 |
|-------------|----------|
| StoryFlow.jsx | **전면 재작성** - Chapter/Step 기반 오케스트레이터 |
| GameProvider | **리팩터** - gauge → xp/level/titles/chaptersCompleted |
| QuizQuestion | **유지** - 문제 데이터만 교체 |
| BlockWorkspace | **유지** - 태블로 UI 그대로 활용 |
| CalcFieldEditor | **유지** - 문제 데이터만 교체 |
| VisualNovel | **수정** - 캐릭터/스토리 데이터 교체 |
| GameStart | **수정** - 파트/챕터 선택 화면 추가 |
| GameOver | **제거** - 생존 메카닉 없음 |
| GameComplete | **수정** → ChapterClear + FinalEnding |

### 새로 추가할 컴포넌트
| 컴포넌트 | 역할 |
|---------|------|
| **챕터/네비게이션** | |
| ChapterSelect.jsx | 스와이프형 챕터 카드 캐러셀 (Framer Motion 스와이프) |
| ChapterCard.jsx | 개별 챕터 카드 (썸네일 + 제목 + 별점 + 상태) |
| LockedCard.jsx | 잠긴 챕터 카드 (blur 모자이크 + 자물쇠 오버레이) |
| PartDivider.jsx | 파트 구분 카드 (파트 사이에 삽입, 잠금/해제 표시) |
| StatusBar.jsx | 하단 정보 바 (레벨 + XP + 호감도 + 별 수) |
| **학습** | |
| ConceptCard.jsx | 개념 학습 카드 (플립 애니메이션) |
| **비주얼 노벨 / 캐릭터** | |
| DialogueBox.jsx | 대사 표시 (타이핑 효과 + 캐릭터 이름 + 표정 연동) |
| CharacterSprite.jsx | 캐릭터 일러스트 표시 (표정 전환, 등장/퇴장 애니메이션) |
| ChoicePanel.jsx | 선택지 2~3개 표시 + 선택 시 연출 |
| ReactionBubble.jsx | 문제 정답/오답 후 캐릭터 리액션 말풍선 |
| **호감도** | |
| AffectionGauge.jsx | 하트 게이지 (단계별 표시) |
| AffectionChangePopup.jsx | 호감도 변동 시 +♥ / -♥ 연출 |
| **사내 이벤트** | |
| EventScene.jsx | 사내 이벤트 공통 래퍼 (배경 + 캐릭터 + 선택지) |
| LunchEvent.jsx | 점심 이벤트 (자리 선택) |
| PartyEvent.jsx | 회식 이벤트 (자리 배치도 + 선택) |
| CafeEvent.jsx | 카페/휴게실 이벤트 |
| TeamEvent.jsx | 팀 행사 이벤트 |
| SpecialEvent.jsx | 조건부 특별 이벤트 (우산, 야근 걷기, 손편지 등) |
| **클리어/엔딩** | |
| ChapterClear.jsx | 별점 + XP + 레벨업 연출 |
| XPBar.jsx | 경험치 바 + 레벨 + 칭호 표시 |
| TitleCollection.jsx | 칭호 수집 페이지 (해금/장착) |
| TitleCard.jsx | 개별 칭호 카드 (해금/미해금 상태) |
| TitleUnlockPopup.jsx | 칭호 해금 시 팝업 연출 |
| EndingScene.jsx | 엔딩 분기 (호감도별 4종 + 공통 승급) |
| FinalEnding.jsx | Ch20 클리어 시 최종 엔딩 + 통계 |

### 게임 상태 (GameProvider)
```javascript
const initialState = {
  playerName: '',
  playerGender: null,          // 'male' | 'female' → 동기 캐릭터 결정 (male→소희, female→준형)
  partnerName: '',             // 자동 설정: '신준형' or '정소희'
  currentChapter: 1,
  currentStep: 'briefing', // briefing → concepts → practice → boss → clear
  currentProblemIndex: 0,
  xp: 0,
  level: 1,
  equippedTitle: null,        // 장착한 칭호 (null이면 기본 레벨 칭호)
  unlockedTitles: [],         // 해금된 칭호 ID 목록
  chaptersCompleted: {},      // { 1: { stars: 3, bestXP: 95 }, ... }
  partsUnlocked: [1],         // [1, 2, 3, 4]
  solvedProblems: [],
  hintsUsed: [],
  totalCorrect: 0,
  totalAttempted: 0,
  bossFirstTryClears: 0,
  retrySuccessCount: 0,       // 오답 후 재도전 성공 횟수

  // 호감도 & 선택지 시스템
  affection: 30,              // 동기(준형/소희) 호감도 (0~100, 시작 30)
  streak: 0,                  // 현재 연속 정답 수 (리액션용)
  choiceHistory: [],          // 선택지 기록 [{ chapterId, choiceId, selected }]
  eventHistory: [],           // 사내 이벤트 기록 [{ chapterId, eventType, selected }]
  endingUnlocked: null,       // 엔딩 타입 (null / 'colleague' / 'friend' / 'some' / 'love')
}
```

### 칭호 시스템 데이터
```javascript
const TITLES = {
  // 별 수집
  star_5: { name: '반짝이 루키', condition: (s) => getTotalStars(s) >= 5 },
  star_15: { name: '별 사냥꾼', condition: (s) => getTotalStars(s) >= 15 },
  star_30: { name: '스타 컬렉터', condition: (s) => getTotalStars(s) >= 30 },
  star_45: { name: '별의 지배자', condition: (s) => getTotalStars(s) >= 45 },
  star_60: { name: '은하수 정복자', condition: (s) => getTotalStars(s) >= 60 },
  // 실력
  perfectionist: { name: '완벽주의자', condition: (s) => getAccuracy(s) >= 0.9 },
  genius: { name: '천재 분석가', condition: (s) => getAccuracy(s) >= 0.8 && allChaptersCleared(s) },
  no_hints: { name: '힌트? 그게 뭐죠?', condition: (s) => getNoHintChapters(s) >= 10 },
  speed_runner: { name: '스피드 러너', condition: (s) => s.bossFirstTryClears >= 10 },
  // 파트 클리어
  part1_master: { name: '기초 졸업생', condition: (s) => partStars(s, 1) >= 2 },
  part2_master: { name: '계산의 달인', condition: (s) => partStars(s, 2) >= 2 },
  part3_master: { name: '분석 전문가', condition: (s) => partStars(s, 3) >= 2 },
  part4_master: { name: '대시보드 아키텍트', condition: (s) => partStars(s, 4) >= 2 },
  ace: { name: '그로우랩의 에이스', condition: (s) => allParts3Stars(s) },
  // 호감도
  affection_40: { name: '관심의 시작', condition: (s) => s.affection >= 40 },
  affection_60: { name: '두근두근', condition: (s) => s.affection >= 60 },
  affection_80: { name: '사내 연애 주의보', condition: (s) => s.affection >= 80 },
  happy_ending: { name: '해피엔딩', condition: (s) => s.endingUnlocked === 'love' },
  iron_wall: { name: '철벽남/녀', condition: (s) => s.affection <= 20 && allChaptersCleared(s) },
  // 히든
  retry_hero: { name: '불굴의 도전자', condition: (s) => s.retrySuccessCount >= 5 },
  first_step: { name: '첫 걸음', condition: (s) => s.chaptersCompleted[1] },
  lod_master: { name: 'LOD 해독가', condition: (s) => s.chaptersCompleted[9]?.stars === 3 },
  overtime_king: { name: '야근의 왕', condition: (s) => getOvertimeCount(s) >= 3 },
  party_master: { name: '회식의 달인', condition: (s) => getAllPartyEvents(s) },
}
```

### 구현 우선순위
1. **Phase A**: GameProvider 리팩터 (호감도/선택지/이벤트 상태 포함) + ChapterSelect + PartBanner
2. **Phase B**: 비주얼 노벨 엔진 (DialogueBox + CharacterSprite + ChoicePanel + ReactionBubble)
3. **Phase C**: Part 1 (Ch 1~4) 데이터 + 스토리 스크립트 + 사내 이벤트 4개
4. **Phase D**: Part 2 (Ch 5~9) 데이터 + 스토리 스크립트 + 사내 이벤트 5개
5. **Phase E**: Part 3 (Ch 10~16) 데이터 + 스토리 스크립트 + 사내 이벤트 7개
6. **Phase F**: Part 4 (Ch 17~20) 데이터 + 스토리 스크립트 + 사내 이벤트 4개
7. **Phase G**: 호감도 시스템 + 엔딩 분기 (EndingScene 4종)
8. **Phase H**: XP/레벨 + 칭호 수집 시스템 (TitleCollection 페이지)
9. **Phase I**: 폴리시 (애니메이션, BGM, 반응형, 특별 이벤트)

---

## 참고 자료
- 교안 1주차 (87장): 인터페이스, 데이터 연결, 차원/측정값, 연속형/불연속형, 마크 카드, VLOD, 집계 방식, 데이터 인터프리터, 관계/유니온
- 교안 2주차 (124p): 계산된 필드 전체 (숫자/문자열/날짜/유형변환/논리/집계 함수), 매개변수, 필터, 데이터 시각화와 설득, Actionable 대시보드, Metric Hierarchy, 인사이트 도출
- 교안 3주차 (108p): 테이블 계산, LOD (FIXED/INCLUDE/EXCLUDE), Order of Operations, 대시보드 액션 (Filter/Highlight/Parameter), 대시보드 UX 설계, 코호트 분석
- AARRR Framework (Pirate Metrics)
- RFM Analysis Best Practices
- Pareto Analysis / ABC Classification
- Cohort Retention Analysis Methodology
- Data Storytelling Principles
