export const calcFieldProblems = [
  {
    id: 'calc_01',
    type: 'calc_field',
    subcategory: 'logic',
    difficulty: 'intermediate',
    day: 3,
    period: 'morning',
    instruction: '매출이 50만원 이상이면 "VIP", 미만이면 "일반"을 반환하는 계산된 필드를 만드세요.',
    fieldName: 'VIP구분',
    availableFields: [
      { name: 'Sales', korName: '매출액', type: 'number' },
      { name: 'Discount', korName: '할인율', type: 'number' },
      { name: 'Quantity', korName: '수량', type: 'number' },
      { name: 'Category', korName: '카테고리', type: 'string' },
    ],
    correctPatterns: [
      {
        pattern: /IF\s*\[Sales\]\s*>=?\s*500000\s*THEN\s*["']VIP["']\s*ELSE\s*["']일반["']\s*END/i,
        description: 'IF/THEN/ELSE 패턴',
      },
      {
        pattern: /IIF\s*\(\s*\[Sales\]\s*>=?\s*500000\s*,\s*["']VIP["']\s*,\s*["']일반["']\s*\)/i,
        description: 'IIF 함수 패턴',
      },
    ],
    partialFeedback: [
      { pattern: /\[Sales\]\s*>=?\s*500000/i, missing: /THEN/i, message: '조건은 맞았어요! THEN 절을 추가해보세요.' },
      { pattern: /IF.*THEN.*END/i, missing: /ELSE/i, message: 'IF/THEN/END 구조 좋아요! ELSE 절도 추가해보세요.' },
    ],
    sampleAnswer: 'IF [Sales] >= 500000\nTHEN "VIP"\nELSE "일반"\nEND',
    explanation: 'IF 문으로 매출액이 50만원 이상인 경우 "VIP", 미만인 경우 "일반"을 반환합니다.',
    hint: 'IF [조건] THEN [참일 때 값] ELSE [거짓일 때 값] END',
    gaugeChange: { correct: 5, incorrect: -10 },
  },
  {
    id: 'calc_02',
    type: 'calc_field',
    subcategory: 'logic',
    difficulty: 'intermediate',
    day: 3,
    period: 'morning',
    instruction: '카테고리별 목표 이익률을 반환하는 CASE 문을 만드세요.\n가구: 0.15, 기술: 0.20, 사무용품: 0.10',
    fieldName: '목표이익률',
    availableFields: [
      { name: 'Category', korName: '카테고리', type: 'string' },
      { name: 'Sales', korName: '매출액', type: 'number' },
      { name: 'Profit', korName: '이익', type: 'number' },
    ],
    correctPatterns: [
      {
        pattern: /CASE\s*\[Category\]\s*WHEN\s*["']가구["']\s*THEN\s*0\.15\s*WHEN\s*["']기술["']\s*THEN\s*0\.2[0]?\s*WHEN\s*["']사무용품["']\s*THEN\s*0\.1[0]?\s*(ELSE\s*0\s*)?END/i,
        description: 'CASE/WHEN 패턴',
      },
    ],
    partialFeedback: [
      { pattern: /CASE\s*\[Category\]/i, missing: /WHEN/i, message: 'CASE 시작은 좋아요! WHEN 절을 추가하세요.' },
      { pattern: /WHEN.*가구/i, missing: /기술/i, message: '가구 조건은 맞았어요! 나머지 카테고리도 추가해보세요.' },
    ],
    sampleAnswer: 'CASE [Category]\nWHEN "가구" THEN 0.15\nWHEN "기술" THEN 0.20\nWHEN "사무용품" THEN 0.10\nELSE 0\nEND',
    explanation: 'CASE 문은 하나의 필드에 대해 여러 조건을 깔끔하게 나열할 수 있습니다. ELSE로 기본값을 지정하면 안전합니다.',
    hint: 'CASE [필드] WHEN "값" THEN 결과 ... END',
    gaugeChange: { correct: 5, incorrect: -10 },
  },
  {
    id: 'calc_03',
    type: 'calc_field',
    subcategory: 'number',
    difficulty: 'intermediate',
    day: 3,
    period: 'afternoon',
    instruction: '매출액을 천원 단위로 반올림하는 계산된 필드를 만드세요.',
    fieldName: '반올림매출',
    availableFields: [
      { name: 'Sales', korName: '매출액', type: 'number' },
      { name: 'Quantity', korName: '수량', type: 'number' },
    ],
    correctPatterns: [
      {
        pattern: /ROUND\s*\(\s*\[Sales\]\s*,\s*-3\s*\)/i,
        description: 'ROUND 함수 패턴',
      },
    ],
    partialFeedback: [
      { pattern: /ROUND\s*\(\s*\[Sales\]/i, missing: /-3/i, message: 'ROUND에 Sales 넣은 건 맞아요! 두 번째 인자를 확인하세요. 천원 단위는 -3입니다.' },
    ],
    sampleAnswer: 'ROUND([Sales], -3)',
    explanation: 'ROUND의 두 번째 인자가 음수이면 정수 자릿수로 반올림합니다. -3이면 천 단위, -2이면 백 단위입니다.',
    hint: 'ROUND(숫자, 자릿수) - 음수 자릿수는 정수 자리에서 반올림합니다.',
    gaugeChange: { correct: 5, incorrect: -10 },
  },
  {
    id: 'calc_04',
    type: 'calc_field',
    subcategory: 'date',
    difficulty: 'intermediate',
    day: 4,
    period: 'morning',
    instruction: '주문일(Order Date)부터 배송일(Ship Date)까지 소요일을 구하는 계산된 필드를 만드세요.',
    fieldName: '배송소요일',
    availableFields: [
      { name: 'Order Date', korName: '주문일', type: 'date' },
      { name: 'Ship Date', korName: '배송일', type: 'date' },
      { name: 'Sales', korName: '매출액', type: 'number' },
    ],
    correctPatterns: [
      {
        pattern: /DATEDIFF\s*\(\s*["']day["']\s*,\s*\[Order Date\]\s*,\s*\[Ship Date\]\s*\)/i,
        description: 'DATEDIFF 패턴',
      },
    ],
    partialFeedback: [
      { pattern: /DATEDIFF/i, missing: /\[Order Date\]/i, message: 'DATEDIFF 함수를 잘 선택했어요! 시작 날짜에 [Order Date]를 넣어보세요.' },
      { pattern: /\[Order Date\].*\[Ship Date\]/i, missing: /day/i, message: '필드는 맞았어요! 단위를 "day"로 지정해보세요.' },
    ],
    sampleAnswer: 'DATEDIFF("day", [Order Date], [Ship Date])',
    explanation: 'DATEDIFF("day", 시작일, 종료일)는 두 날짜 사이의 일수 차이를 반환합니다.',
    hint: 'DATEDIFF("단위", 시작날짜, 끝날짜)',
    gaugeChange: { correct: 5, incorrect: -10 },
  },
  {
    id: 'calc_05',
    type: 'calc_field',
    subcategory: 'date',
    difficulty: 'intermediate',
    day: 4,
    period: 'morning',
    instruction: '주문일을 월 단위로 절삭하는 계산된 필드를 만드세요.',
    fieldName: '주문월',
    availableFields: [
      { name: 'Order Date', korName: '주문일', type: 'date' },
      { name: 'Ship Date', korName: '배송일', type: 'date' },
    ],
    correctPatterns: [
      {
        pattern: /DATETRUNC\s*\(\s*["']month["']\s*,\s*\[Order Date\]\s*\)/i,
        description: 'DATETRUNC 패턴',
      },
    ],
    partialFeedback: [
      { pattern: /DATETRUNC/i, missing: /month/i, message: 'DATETRUNC 함수 좋아요! 단위를 "month"로 지정해보세요.' },
    ],
    sampleAnswer: 'DATETRUNC("month", [Order Date])',
    explanation: 'DATETRUNC("month", 날짜)는 날짜를 해당 월의 1일로 절삭합니다. 월별 분석에 유용합니다.',
    hint: 'DATETRUNC("단위", 날짜필드)',
    gaugeChange: { correct: 5, incorrect: -10 },
  },
  {
    id: 'calc_06',
    type: 'calc_field',
    subcategory: 'string',
    difficulty: 'intermediate',
    day: 4,
    period: 'afternoon',
    instruction: '고객 이름에서 첫 글자(성)만 추출하는 계산된 필드를 만드세요.',
    fieldName: '성',
    availableFields: [
      { name: 'Customer Name', korName: '고객이름', type: 'string' },
      { name: 'Category', korName: '카테고리', type: 'string' },
    ],
    correctPatterns: [
      {
        pattern: /LEFT\s*\(\s*\[Customer Name\]\s*,\s*1\s*\)/i,
        description: 'LEFT 함수 패턴',
      },
    ],
    partialFeedback: [
      { pattern: /LEFT/i, missing: /\[Customer Name\]/i, message: 'LEFT 함수 맞아요! [Customer Name] 필드를 넣어보세요.' },
    ],
    sampleAnswer: 'LEFT([Customer Name], 1)',
    explanation: 'LEFT(문자열, 길이)는 문자열의 왼쪽에서 지정한 길이만큼 문자를 추출합니다.',
    hint: 'LEFT(문자열, 추출할글자수)',
    gaugeChange: { correct: 5, incorrect: -10 },
  },
  {
    id: 'calc_07',
    type: 'calc_field',
    subcategory: 'comprehensive',
    difficulty: 'advanced',
    day: 5,
    period: 'morning',
    instruction: '할인율이 10% 이상인 주문의 매출만 합산한 후 백원 단위로 반올림하는 계산된 필드를 만드세요.',
    fieldName: '할인매출',
    availableFields: [
      { name: 'Sales', korName: '매출액', type: 'number' },
      { name: 'Discount', korName: '할인율', type: 'number' },
      { name: 'Quantity', korName: '수량', type: 'number' },
    ],
    correctPatterns: [
      {
        pattern: /ROUND\s*\(\s*IF\s*\[Discount\]\s*>=?\s*0\.1\s*THEN\s*\[Sales\]\s*ELSE\s*0\s*END\s*,\s*-2\s*\)/i,
        description: 'ROUND + IF 패턴',
      },
      {
        pattern: /IF\s*\[Discount\]\s*>=?\s*0\.1\s*THEN\s*ROUND\s*\(\s*\[Sales\]\s*,\s*-2\s*\)\s*ELSE\s*0\s*END/i,
        description: 'IF + 내부 ROUND 패턴',
      },
    ],
    partialFeedback: [
      { pattern: /\[Discount\]\s*>=?\s*0\.1/i, missing: /ROUND/i, message: '할인율 조건은 맞았어요! ROUND로 반올림도 추가해보세요.' },
      { pattern: /ROUND/i, missing: /\[Discount\]/i, message: 'ROUND를 잘 넣었어요! 할인율 조건도 추가해보세요.' },
    ],
    sampleAnswer: 'ROUND(\n  IF [Discount] >= 0.1\n  THEN [Sales]\n  ELSE 0\n  END\n, -2)',
    explanation: 'IF 문으로 할인율 조건을 검사하고, ROUND로 결과를 반올림합니다. 함수를 중첩하여 복합적인 계산을 할 수 있습니다.',
    hint: 'IF 문 안에 ROUND를 넣거나, ROUND 안에 IF를 넣어보세요.',
    gaugeChange: { correct: 5, incorrect: -10 },
  },
]
